<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Python Exercises</title>
    <script src="https://cdn.jsdelivr.net/npm/skulpt@1.2.0/skulpt.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/skulpt@1.2.0/skulpt-stdlib.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        textarea { width: 100%; height: 200px; font-family: monospace; font-size: 14px; }
        #output { background: #f4f4f4; padding: 10px; min-height: 100px; margin-top: 10px; white-space: pre-wrap; }
        button { margin-top: 10px; padding: 10px 20px; font-size: 14px; }
        select { margin-top: 10px; font-size: 14px; padding: 5px; }
    </style>
</head>
<body>
    <h2>Python Exercises</h2>

    <label for="exercise">Choose an exercise:</label>
    <select id="exercise" onchange="loadExercise()">
        <option value="1">Hello World</option>
        <option value="2">Sum Two Numbers</option>
        <option value="3">For Loop Example</option>
    </select>

    <textarea id="code"></textarea>
    <br>
    <button onclick="runPython()">Run</button>
    <pre id="output"></pre>

    <script>
        const exercises = {
            1: `# Hello World
print("Hello, World!")`,

            2: `# Sum Two Numbers
a = 5
b = 3
print("Sum:", a + b)`,

            3: `# For Loop Example
for i in range(5):
    print("Number:", i)`
        };

        // Load the selected exercise
        function loadExercise() {
            const select = document.getElementById("exercise");
            const code = document.getElementById("code");
            code.value = exercises[select.value];
            document.getElementById("output").innerText = "";
        }

        // Load the default exercise on page load
        window.onload = loadExercise;

        function builtinRead(x) {
            if (Sk.builtinFiles === undefined || Sk.builtinFiles["files"][x] === undefined)
                throw "File not found: '" + x + "'";
            return Sk.builtinFiles["files"][x];
        }

        function runPython() {
            const code = document.getElementById("code").value;
            const output = document.getElementById("output");
            output.innerText = ""; // clear previous output

            Sk.configure({
                output: function(text) { output.innerText += text; },
                read: builtinRead
            });

            Sk.misceval.asyncToPromise(() => Sk.importMainWithBody("<stdin>", false, code, true))
                .catch(err => { output.innerText += err.toString(); });
        }
    </script>
</body>
</html>
